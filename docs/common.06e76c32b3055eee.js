"use strict";(self.webpackChunkluichewjohor=self.webpackChunkluichewjohor||[]).push([[592],{9363:(g,c,e)=>{e.d(c,{a:()=>f});var i=e(5698),d=e(4004),_=e(4650),E=e(5087),u=e(1779);let f=(()=>{class a{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.user.pipe((0,i.q)(1),(0,d.U)(o=>!!o||this.router.createUrlTree(["/auth"])))}}return a.\u0275fac=function(t){return new(t||a)(_.LFG(E.e),_.LFG(u.F0))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},5843:(g,c,e)=>{e.d(c,{p:()=>i});class i{constructor(_,E,u,f){this.file=_,this.type=E,this.name=u,this.url=f}}},2248:(g,c,e)=>{e.d(c,{I:()=>f});var i=e(5861),d=e(8746),_=e(4650),E=e(8646),u=e(377);let f=(()=>{class a{constructor(t,r){this.db=t,this.storage=r,this.percentage=0,this.downloadUrl=[],this.observableTask=[]}pushFileToStorage(t,r,o,s){const h=`${r}/${t.file.name}`,n=this.storage.ref(h),l=this.storage.upload(h,t.file);return l.snapshotChanges().pipe((0,d.x)(()=>{n.getDownloadURL().subscribe(M=>{t.url=M,t.name=t.file.name,this.saveFileData(t,r,o,s)})})).subscribe(),l.percentageChanges()}saveFileData(t,r,o,s){this.db.list(r).update(o+"/"+s,t)}getFiles(t,r){return this.db.list(r,o=>o.limitToLast(t))}deleteFileStorage(t,r){this.storage.ref(`${r}/${t}`).listAll().subscribe(h=>{h.items.forEach(n=>n.delete())})}upload(t,r,o){var s=this;return(0,i.Z)(function*(){if(t&&t.length>0){let h=0;for(let n=0;n<t.length;n++)t[n].file?s.pushFileToStorage(t[n],r,o,h).subscribe({next:l=>s.percentage=Math.round(l||0),error:l=>console.log(l)}):console.warn("FileUpload dont have file attirbute [ %s ]",t)}})()}uploadFileList(t){var r=this;return(0,i.Z)(function*(){if(t&&t.length>0)for(let o=0;o<t.length;o++){let s=t[o].fileList,h=0;for(let n=0;n<s.length;n++)s[n].file?r.pushFileToStorage(s[n],t[o].path,t[o].attribute,h).subscribe({next:l=>r.percentage=Math.round(l||0),error:l=>console.log(l)}):console.warn("FileUpload dont have file attirbute [ %s ]",s),h++}})()}}return a.\u0275fac=function(t){return new(t||a)(_.LFG(E.KQ),_.LFG(u.Q1))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},4466:(g,c,e)=>{e.d(c,{m:()=>E});var i=e(6895),d=e(433),_=e(4650);let E=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({imports:[i.ez,d.UX,i.ez,d.UX]}),u})()}}]);